<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="refresh" content="1800">
  <title>Dedicatorias - Feria de las Flores</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Arial', sans-serif;
      position: relative;
    }
    video#fondoVideo {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }
    .contenedor {
      width: 100%;
      height: 100%;
      position: relative;
    }
    .de, .para {
      position: absolute;
      font-size: 230px;
      font-weight: bold;
      text-shadow: 0px 0px 0px rgba(0,0,0,0.6);
      color: white; /* Valor por defecto */
      transition: color 0.5s ease;
    }
    .de {
      top: 600px;
      left: 2300px;
    }
    .para {
      bottom: 1900px;
      right: 1400px;
    }
  </style>
</head>
<body>
  <video id="fondoVideo" autoplay muted loop></video>

  <div class="contenedor">
    <div id="de" class="de"></div>
    <div id="para" class="para"></div>
  </div>

  <script>
    const URL = "https://script.google.com/macros/s/AKfycbzjWEco_1WTKoP82WQYxTDPrjVwE2SLwrzzr-760Ap2cingRJVBLBFolUJmoz0ZxKSf0w/exec";
    let dedicatorias = [];
    let index = 0;
    const videoEl = document.getElementById("fondoVideo");
    const deEl = document.getElementById("de");
    const paraEl = document.getElementById("para");

    const coloresPorFlor = {
      "girasol.mp4": "#025100",
      "rosa.mp4": "#4f0035",
      "orquidea.mp4": "#004f40",
      "margarita.mp4": "#4f3a00",
      "clavel.mp4": "#000f4f"
    };

    async function cargarDatos() {
  try {
    const res = await fetch(URL);
    const datos = await res.json();
    dedicatorias = datos.sort(() => Math.random() - 0.5); // <-- barajado
    if (dedicatorias.length === 0) {
      deEl.textContent = "Aún no hay";
      paraEl.textContent = "dedicatorias";
      return;
    }
    mostrarDedicatoria();
    setInterval(mostrarDedicatoria, 7000);
  } catch (error) {
    deEl.textContent = "Error";
    paraEl.textContent = "al cargar datos";
    console.error(error);
  }
}

    function mostrarDedicatoria() {
      const item = dedicatorias[index];
      deEl.textContent = item.de;
      paraEl.textContent = item.para;
      videoEl.src = item.fondo;
      videoEl.load();
      videoEl.play();

      // Aplicar color según fondo
      const color = coloresPorFlor[item.fondo.toLowerCase()] || "#ffffff";
      deEl.style.color = color;
      paraEl.style.color = color;

      index = (index + 1) % dedicatorias.length;
    }

    cargarDatos();
  </script>
</body>
</html>


